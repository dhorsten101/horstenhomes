{% extends "base.html" %}
{% load money_extras %}

{% block title %}Plans | Platform{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="h4 mb-0">Plans</h1>
  <div class="d-flex gap-2">
    <a class="btn btn-sm btn-primary" href="{% url 'platform:entitlements_dashboard' %}">Back</a>
    <a class="btn btn-sm btn-outline-primary" href="{% url 'admin:entitlements_plan_changelist' %}">Open in Django admin</a>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-sm align-middle">
    <thead>
      <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Active</th>
        <th>Price</th>
        <th>Units</th>
        <th>Quotas</th>
        <th>Features</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for p in plans %}
        <tr>
          <td><code>{{ p.code }}</code></td>
          <td>{{ p.name }}</td>
          <td>{% if p.is_active %}<span class="badge bg-success">yes</span>{% else %}<span class="badge bg-secondary">no</span>{% endif %}</td>
          <td>{{ p.unit_price|usd }}</td>
          <td>
            {% if p.quotas.max_units %}
              {{ p.quotas.max_units }}
            {% else %}
              <span class="badge bg-secondary">unlimited</span>
            {% endif %}
          </td>
          <td class="small text-muted"><code>{{ p.quotas }}</code></td>
          <td class="small text-muted"><code>{{ p.feature_flags }}</code></td>
          <td class="text-end">
            <a class="btn btn-sm btn-outline-primary" href="{% url 'admin:entitlements_plan_change' p.id %}">Edit</a>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="8" class="text-muted">No plans.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

