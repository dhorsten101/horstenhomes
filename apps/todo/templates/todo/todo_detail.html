{% extends "base.html" %}

{% block title %}Todo{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h1 class="h4 mb-0">{{ todo.title }}</h1>
      <div class="text-muted small">
        {% if todo.content_type and todo.object_id %}
          {{ todo.content_type.app_label }}.{{ todo.content_type.model }} #{{ todo.object_id }}
        {% else %}
          Unattached
        {% endif %}
      </div>
    </div>
    <div class="d-flex gap-2">
      <form method="post" action="{% url 'todo:toggle' todo.pk %}">
        {% csrf_token %}
        <button class="btn btn-sm {% if todo.status == 'done' %}btn-outline-secondary{% else %}btn-outline-success{% endif %}" type="submit">
          {% if todo.status == 'done' %}Reopen{% else %}Done{% endif %}
        </button>
      </form>
      <a class="btn btn-sm btn-outline-warning" href="{% url 'todo:edit' todo.pk %}">Edit</a>
      <form method="post" action="{% url 'todo:delete' todo.pk %}">
        {% csrf_token %}
        <button class="btn btn-sm btn-outline-danger" type="submit" data-confirm="Delete this todo?">Delete</button>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <dl class="row mb-0">
        <dt class="col-sm-3">Status</dt>
        <dd class="col-sm-9">{{ todo.get_status_display }}</dd>

        <dt class="col-sm-3">Due date</dt>
        <dd class="col-sm-9">{{ todo.due_date|default:"—" }}</dd>

        <dt class="col-sm-3">Assigned to</dt>
        <dd class="col-sm-9">{{ todo.assigned_to|default:"—" }}</dd>

        <dt class="col-sm-3">Description</dt>
        <dd class="col-sm-9">{{ todo.description|linebreaksbr|default:"—" }}</dd>
      </dl>
    </div>
  </div>

  <div class="mt-3">
    <a class="btn btn-primary" href="{% url 'todo:list' %}">Back to todo</a>
  </div>
</div>
{% endblock %}

