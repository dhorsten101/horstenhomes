Below are final, ready-to-commit versions of both files, written cleanly and consistently for Horsten Homes.

You can copy these verbatim into your repo as:
	â€¢	README.md
	â€¢	CONTRIBUTING.md

They are aligned with:
	â€¢	your Docker-only dev model
	â€¢	schema-per-tenant architecture
	â€¢	./bin/dev CLI
	â€¢	single-server, non-K8s philosophy

â¸»

ğŸ“˜ README.md

# Horsten Homes

Horsten Homes is a **SaaS platform with schema-per-tenant multi-tenancy**, built on Django and PostgreSQL.
It is designed for **strong tenant isolation, operational clarity, and controlled scaling** without Kubernetes or docker-compose.

This repository is **developer-focused** and optimized for Docker-based local development.

---

## Key Characteristics

- Single Django project
- PostgreSQL **schema-per-tenant** isolation
- Public schema for control-plane data only
- Tenant-local users and admin
- Docker-first development
- Explicit operational commands via `./bin/dev`

---

## Tech Stack

| Layer | Technology |
|-----|-----------|
| Backend | Django 5.x |
| Multi-tenancy | django-tenants |
| Database | PostgreSQL 16 |
| Cache / Broker | Redis |
| Frontend | Django templates + HTMX |
| Dev runtime | Docker |
| Prod target | Ubuntu 22.04+ |
| Orchestration | None (intentional) |

---

## Architecture Overview

### Multi-Tenant Model

- **Public schema**
  - Tenant registry
  - Domain routing
  - No business data

- **Tenant schemas**
  - Users & auth
  - Business models
  - Fully isolated per tenant

Each request is routed to a tenant schema via hostname.

---

## Repository Structure

```text
horstenhomes/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ tenancy/        # Tenant + Domain (public schema)
â”‚   â”œâ”€â”€ accounts/       # Custom tenant user model
â”‚   â””â”€â”€ ...
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â””â”€â”€ local.py
â”‚   â””â”€â”€ urls.py
â”œâ”€â”€ bin/                # Dev CLI scripts
â”œâ”€â”€ Dockerfile.dev
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ .env.dev
â””â”€â”€ README.md


â¸»

Local Development Requirements
	â€¢	Docker Desktop (required)
	â€¢	macOS or Linux
	â€¢	No local Python or virtualenv needed

Non-Docker development is not supported.

â¸»

Environment Setup

Create .env.dev in the project root:

DJANGO_SETTINGS_MODULE=config.settings.local
DEBUG=1

ALLOWED_HOSTS=localhost,127.0.0.1,acme.horstenhomes.local

DB_NAME=horstenhomes
DB_USER=horstenhomes
DB_PASSWORD=horstenhomes
DB_HOST=hh-postgres
DB_PORT=5432

REDIS_URL=redis://hh-redis:6379/0


â¸»

Getting Started

1. Start the environment

./bin/dev up

This starts:
	â€¢	PostgreSQL
	â€¢	Redis
	â€¢	Django dev server (detached)

â¸»

2. Run shared migrations

./bin/dev migrate shared


â¸»

3. Provision a tenant

./bin/dev provision acme acme.horstenhomes.local

This will:
	â€¢	Create tenant + schema
	â€¢	Map domains
	â€¢	Run tenant migrations
	â€¢	Create a tenant admin user

â¸»

4. Access the tenant

http://acme.horstenhomes.local:8000/admin/


â¸»

Dev CLI Reference

All operations go through:

./bin/dev <command>

Environment control

./bin/dev up
./bin/dev down
./bin/dev down --all
./bin/dev down --nuke


â¸»

Migrations

./bin/dev migrate shared
./bin/dev migrate tenant <schema>
./bin/dev migrate all <schema>
./bin/dev migrate make [app]


â¸»

Tenant lifecycle

./bin/dev provision <schema> <domain>
./bin/dev list-tenants
./bin/dev delete-tenant <schema>
./bin/dev delete-tenant <schema> --drop-schema

âš ï¸ --drop-schema is destructive and for dev only.

â¸»

Diagnostics

./bin/dev status
./bin/dev health
./bin/dev logs
./bin/dev logs all 300


â¸»

Common Issues

â€œNo tenant for hostnameâ€
	â€¢	Tenant not provisioned
	â€¢	Domain not mapped
	â€¢	Fix with:

./bin/dev provision <schema> <domain>



Schema does not exist
	â€¢	Database was reset
	â€¢	Tenants must be reprovisioned

Admin returns 404
	â€¢	Admin is tenant-scoped
	â€¢	Access via tenant domain, not localhost

â¸»

Production Notes
	â€¢	Designed for single-server deployment
	â€¢	No Kubernetes
	â€¢	No docker-compose
	â€¢	Recommended:
	â€¢	Nginx
	â€¢	Gunicorn
	â€¢	systemd
	â€¢	Managed PostgreSQL

â¸»

Guardrails
	â€¢	Never mix shared and tenant models in one app
	â€¢	Never run tenant migrations before shared
	â€¢	Never access admin via public schema
	â€¢	Never bypass ./bin/dev

â¸»

Horsten Homes is intentionally opinionated:
explicit over implicit, predictable over clever.

---

# ğŸ“• `CONTRIBUTING.md`

```md
# Contributing to Horsten Homes

This project is a multi-tenant SaaS system with strict architectural and operational rules.
Contributions must preserve tenant isolation and deployment safety.

---

## Development Rules

- Docker is mandatory
- No local virtualenvs
- No docker-compose
- Do not run manage.py directly on your host
- All operations go through `./bin/dev`

If Docker is not running, you cannot contribute.

---

## Branching Strategy

- `main` â†’ stable and deployable
- Feature branches:

feature/
fix/

---

## Running the Project

```bash
./bin/dev up
./bin/dev migrate shared
./bin/dev provision acme acme.horstenhomes.local


â¸»

Migration Rules (CRITICAL)
	â€¢	Shared apps â†’ ./bin/dev migrate shared
	â€¢	Tenant apps â†’ ./bin/dev migrate tenant <schema>
	â€¢	Never mix shared + tenant models in one app
	â€¢	Never edit migration files manually

Violating these rules can break tenant isolation.

â¸»

Tenant Safety Rules
	â€¢	Never drop schemas manually in Postgres
	â€¢	Always use:

./bin/dev delete-tenant <schema>


	â€¢	Use --drop-schema only in development

â¸»

Code Expectations
	â€¢	No cross-tenant queries
	â€¢	No direct schema switching outside approved utilities
	â€¢	Clear separation between public and tenant apps
	â€¢	Explicit imports
	â€¢	No hidden side effects at import time

â¸»

What NOT to Do

âŒ Run manage.py directly
âŒ Add tenant models to public apps
âŒ Assume public schema contains business data
âŒ Bypass CLI tooling
âŒ â€œJust try somethingâ€ in production

â¸»

Pull Request Expectations

PRs must:
	â€¢	Migrate cleanly (shared + tenant)
	â€¢	Not break tenant routing
	â€¢	Not introduce schema leaks
	â€¢	Follow existing patterns

If in doubt, ask before merging.

â¸»

This project prioritizes operational safety over convenience.

---

## âœ… What you now have

- Clear onboarding (`README.md`)
- Strong guardrails (`CONTRIBUTING.md`)
- A professional SaaS documentation baseline
- Something you can confidently hand to another engineer

If you want next, I can:
- Add `ARCHITECTURE.md`
- Add `docs/DEV_WORKFLOWS.md`
- Or help you freeze v1 and move into feature delivery